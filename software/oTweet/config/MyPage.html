{{ block title }}
    Session Configs
{{ endblock }}
{{ block content }}

<div id="history">

</div>

<script>

  let inputbox;

  function liveRecv(data) {

      console.log('receiving')
      var alertDiv = document.getElementById('alertPlaceholder');

        // Update class and role of the div
        alertDiv.className = 'alert alert-primary my-4';
        alertDiv.setAttribute('role', 'alert');

        // Clear existing content
        alertDiv.innerHTML = '';

        // Create an anchor (a) element
        var link = document.createElement('a');
        link.href = data.admin_url
        link.textContent = 'Check ' + data.admin_url;

        // Append the anchor element to the div
        alertDiv.appendChild(link);

    }

  function sendValue() {

    console.log('sent')

    let participant_number = document.getElementById('participant_number');
    let content_url = document.getElementById('content_url');
    let recruitment_platform = document.getElementById('recruitment_platform');
    let survey_url = document.getElementById('survey_url');
    let search_term = document.getElementById('search_term');
    let sort_by = document.getElementById('sort_by');
    let condition_col = document.getElementById('condition_col');
    let display_skyscraper = document.getElementById('display_skyscraper');
    let html_briefing = document.getElementById('html_briefing');

    liveSend({'participant_number': parseInt(participant_number.value),
              'content_url': content_url.value,
              'display_skyscraper': display_skyscraper.checked,
              'recruitment_platform': recruitment_platform.value,
              'survey_url': survey_url.value,
              'search_term': search_term.value,
              'sort_by': sort_by.value,
              'condition_col': condition_col.value,
              'briefing': html_briefing.value});

  }

  document.addEventListener('DOMContentLoaded', function () {
        var checkBox = document.getElementById('display_skyscraper');
        var adCard = document.getElementById('adCard');

        checkBox.addEventListener('change', function () {
            if (this.checked) {
                adCard.style.display = 'block';
            } else {
                adCard.style.display = 'none';
            }
        });
    });

</script>

<body class="bg-light">

    <div class="card my-4 border-0 shadow">
        <div class="card-body">
            <h5 class="card-title h2 mb-0">
                Recruitment
            </h5>
            <p class="card-text text-muted">
                <small>
                    Lorem ipsum.
                </small>
            </p>
            <form>
                <div class="mb-3">
                    <label for="recruitment_platform" class="form-label"></label>
                    <select class="form-select" id="recruitment_platform" aria-describedby="recruitment_help">
                        <option selected>Choose Your Recruitment Platform</option>
                        <option value="None">None</option>
                        <option value="Prolific">Prolific</option>
                        <option value="MTurk">MTurk</option>
                    </select>
                    <div id="recruitment_help" class="form-text">
                        As of today, you can only select 'Prolific' or 'None'.
                        You'll soon be able to also select other platforms to recruit from.
                    </div>
                </div>
                <div class="mb-3">
                    <label for="participant_number" class="form-label">Specify the Number of Rows in Database</label>
                    <input type="number" class="form-control w-100" id="participant_number" aria-describedby="participant_help" value="1">
                    <div id="participant_help" class="form-text">
                        Please specify the desired number of participants and keep in mind that every started
                        participation burns one slot -- independent of whether the participant completes the survey.
                    </div>
                </div>
            </form>
        </div>
    </div>

    <div class="card my-4 border-0 shadow">
        <div class="card-body">
            <h5 class="card-title h2 mb-0">
                Stimulus Configurations
            </h5>
            <p class="card-text text-muted">
                <small>
                    Please use the following forms to specify the content you want to display in the social media feed and
                    the way it is displayed.
                </small>
            </p>
            <form>
                <div class="mb-3">
                    <label for="channel_type" class="form-label">Choose Social Media Platform</label>
                    <input type="text" class="form-control" id="channel_type" aria-describedby="channel_help" value="Twitter" readonly>
                    <div id="channel_help" class="form-text">
                        As of today, you can only select 'Twitter'.
                        You'll soon be able to also select other platforms to mimic.
                    </div>
                </div>
                <div class="mb-3">
                    <label for="content_url" class="form-label">Provide URL Directing to Your Content</label>
                    <input type="text" class="form-control" id="content_url" aria-describedby="url_help" value="https://raw.githubusercontent.com/Howquez/tainted_trends/main/software/twitter/static/data/Zegna.csv">
                    <div id="url_help" class="form-text">
                        Please provide a url directing to your raw, ;-separated, UTF-8 formatted csv file (preferably GitHub or gDrive).
                    </div>
                </div>
                <div class="mb-3">
                    <label for="search_term" class="form-label">Provide a Term Displayed in Search Bar</label>
                    <input type="text" class="form-control" id="search_term" aria-describedby="search_help" value="#myHashtag">
                    <div id="search_help" class="form-text">
                        Consider using a hashtag as a prefix.
                    </div>
                </div>

                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" role="switch" id="display_skyscraper">
                    <label class="form-check-label" for="display_skyscraper">Display  Skyskraper Banner Ad?</label>
                </div>
            </form>
        </div>
    </div>

    <div class="card my-4 border-0 shadow">
        <div class="card-body">
            <h5 class="card-title h2 mb-0">
                Conditions
            </h5>
            <p class="card-text text-muted">
                <small>
                    Please use the following forms to define potential conditions participants will be randomly assigned to.
                </small>
            </p>
            <form>
                <div class="mb-3">
                    <label for="condition_col" class="form-label">Define Condition Variable (within csv file)</label>
                    <input type="text" class="form-control" id="condition_col" aria-describedby="col_help" value="column_name">
                    <div id="col_help" class="form-text">
                        If you intend to manipulate some element of the feed between-subjects, you can do so by creating
                        a column in the csv file you provide. This column can take as many values as you need.
                        Participants will be randomly assigned to one of the values in that column.
                        If you don't provide a column name, there won't be any conditions that differ with respect to
                        the feed's content.
                    </div>
                </div>
                <div class="mb-3">
                    <label for="sort_by" class="form-label">Define Sorting Variable (within csv file)</label>
                    <input type="text" class="form-control" id="sort_by" aria-describedby="sort_help" value="time_stamp">
                    <div id="sort_help" class="form-text">
                        You can also provide a variable that specifies the order in which the posts are displayed.
                        Please provide one unique numeric value per row. The post associated to the lowest number will
                        be displayed on top of the feed, the post associated to the highest number will be displayed
                        at the bottom.
                        You can provide both a condition and a sorting variable to mock different recommender- and
                        sorting algorithms. If you don't provide a column name, the posts will be displayed in a fully
                        randomized order (between subjects).
                    </div>
                </div>
            </form>
        </div>
    </div>

    <div class="card my-4 border-0 shadow">
        <div class="card-body">
            <h5 class="card-title h2 mb-0">
                Pre-Stimulus Configurations
            </h5>
            <p class="card-text text-muted">
                <small>
                    Please use HTML to specify the briefing participants read prior to the feed exposure.
                    The whole page is skipped if you leave this field empty.
                </small>
            </p>
            <form>
                <div class="mb-3">
                    <label for="html_briefing" class="form-label">Provide Briefing (in HTML)</label>
                    <textarea class="form-control border-light border-3" id="html_briefing" name="html_briefing" rows="6" aria-describedby="briefing_help"><h5>This could be your briefing</h5><p>Use HTML syntax to format your content to your liking.</p></textarea>
                    <div id="briefing_help" class="form-text">
                        Lorem ipsum.
                    </div>
                </div>
            </form>
        </div>
    </div>

    <div class="card my-4 border-0 shadow">
        <div class="card-body">
            <h5 class="card-title h2 mb-0">
                Post-Stimulus Configurations
            </h5>
            <p class="card-text text-muted">
                <small>
                    Configure the following fields, if you want to append a survey to the stimulus.
                </small>
            </p>
            <form>
                <div class="mb-3">
                    <select class="form-select" id="survey_tool" aria-describedby="survey_help">
                        <option selected>Choose Your Survey Tool</option>
                        <option value="None">None</option>
                        <option value="Qualtrics">Qualtrics</option>
                        <option value="Unipark">Unipark</option>
                    </select>
                    <div id="survey_help" class="form-text">
                        Lorem ipsum.
                    </div>
                </div>
                <div class="mb-3">
                    <label for="survey_url" class="form-label">Insert Your Survey's URL</label>
                    <input type="text" class="form-control" id="survey_url" aria-describedby="survey_url_help" value="https://www.qualtrics.com/">
                    <div id="survey_url_help" class="form-text">
                        Please provide a url directing to your survey. Please don't add any manual url parameters.
                    </div>
                </div>
            </form>
        </div>
    </div>

    <div class="card my-4 border-0 shadow" id="adCard" style="display: none;">
        <div class="card-body">
            <h5 class="card-title h2 mb-0">
                Skyscraper Banner Ad
            </h5>
            <p class="card-text text-muted">
                <small>
                    Lorem ipsum.
                </small>
            </p>
        </div>
    </div>

    <button type="button" class="btn btn-primary" onclick="sendValue(); console.log('hi');">Create Session</button>

    <div id="alertPlaceholder"></div>

</body>

{{ endblock }}
